---
layout: post
tags:
  - Scala
---
title: "怎样实现 ‘aaa := "AAA"，即为符号增加函数并隐式转换"
date: 2011-09-13 22:40:03
tags:
---

我们在写web应用时，经常会在controller中写如此的代码：
<pre class="csharpcode">context(<span class="str">"aaa"</span>)=<span class="str">"AAA"</span>```
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>这个aaa就是将传给view层的变量。 

能否用一种更简化的写法达到同样的效率？可以利用scala中的符号（Symbol），写成： 

'aaa := &#8220;AAA&#8221;

<span id="more-200"></span>
<p>需要做两件事： 

1. 隐式转换 

&nbsp;&nbsp;&nbsp; 创建一个symbol的wrapper类，将对符号的操作，转换到它身上。 

2.在wrapper类中，定义:=方法 

<p>代码如下：
<pre class="csharpcode"><span class="kwrd">implicit</span> def symbolWrapper(s: Symbol) = <span class="kwrd">new</span> SymbolHelper(s)

var map = Map()

<span class="kwrd">class</span> SymbolHelper(s: Symbol) {
    def :=(<span class="kwrd">value</span>:String) {
        map += (s.name -> <span class="kwrd">value</span>)
    }
}

<span class="kwrd">object</span> testSymbol {
    def main(args : Array[String]) : Unit = {
        <span class="str">'a := "AAA"
        '</span>b := <span class="str">"BBB"</span>
        println(map)
    }
}
```